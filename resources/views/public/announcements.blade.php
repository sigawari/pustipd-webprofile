@php
    // Data dummy pengumuman (array stdClass atau array assosiatif)
    $announcements = collect([
        (object) [
            'title' => 'Maintenance Server Terjadwal - 25 Juli 2025',
            'excerpt' =>
                'Akan dilakukan maintenance server untuk upgrade sistem pada Kamis, 25 Juli 2025 pukul 01:00 - 05:00 WIB. Mohon maklum atas ketidaknyamanan yang terjadi.',
            'date' => \Carbon\Carbon::parse('2025-07-23'),
            'category' => 'Maintenance',
            'slug' => 'maintenance-server-terjadwal',
            'priority' => 'urgent',
        ],
        (object) [
            'title' => 'Pembukaan Pendaftaran Program Magang Teknologi',
            'excerpt' =>
                'Kesempatan magang untuk mahasiswa jurusan IT dengan durasi 3-6 bulan. Dapatkan pengalaman kerja di lingkungan teknologi terdepan dengan mentor berpengalaman.',
            'date' => \Carbon\Carbon::parse('2025-07-22'),
            'category' => 'Rekrutmen',
            'slug' => 'pendaftaran-program-magang',
            'priority' => 'normal',
        ],
        (object) [
            'title' => 'Update Kebijakan Keamanan Data Terbaru',
            'excerpt' =>
                'Pembaruan kebijakan keamanan data untuk compliance dengan standar internasional. Semua pengguna diminta untuk memperbarui password dan mengaktifkan 2FA.',
            'date' => \Carbon\Carbon::parse('2025-07-21'),
            'category' => 'Kebijakan',
            'slug' => 'update-kebijakan-keamanan',
            'priority' => 'urgent',
        ],
        (object) [
            'title' => 'Maintenance Server Terjadwal - 25 Juli 2025',
            'excerpt' =>
                'Akan dilakukan maintenance server untuk upgrade sistem pada Kamis, 25 Juli 2025 pukul 01:00 - 05:00 WIB. Mohon maklum atas ketidaknyamanan yang terjadi.',
            'date' => \Carbon\Carbon::parse('2025-07-23'),
            'category' => 'Maintenance',
            'slug' => 'maintenance-server-terjadwal',
            'priority' => 'urgent',
        ],
        (object) [
            'title' => 'Pembukaan Pendaftaran Program Magang Teknologi',
            'excerpt' =>
                'Kesempatan magang untuk mahasiswa jurusan IT dengan durasi 3-6 bulan. Dapatkan pengalaman kerja di lingkungan teknologi terdepan dengan mentor berpengalaman.',
            'date' => \Carbon\Carbon::parse('2025-07-22'),
            'category' => 'Rekrutmen',
            'slug' => 'pendaftaran-program-magang',
            'priority' => 'normal',
        ],
        (object) [
            'title' => 'Update Kebijakan Keamanan Data Terbaru',
            'excerpt' =>
                'Pembaruan kebijakan keamanan data untuk compliance dengan standar internasional. Semua pengguna diminta untuk memperbarui password dan mengaktifkan 2FA.',
            'date' => \Carbon\Carbon::parse('2025-07-21'),
            'category' => 'Kebijakan',
            'slug' => 'update-kebijakan-keamanan',
            'priority' => 'urgent',
        ],
        (object) [
            'title' => 'Maintenance Server Terjadwal - 25 Juli 2025',
            'excerpt' =>
                'Akan dilakukan maintenance server untuk upgrade sistem pada Kamis, 25 Juli 2025 pukul 01:00 - 05:00 WIB. Mohon maklum atas ketidaknyamanan yang terjadi.',
            'date' => \Carbon\Carbon::parse('2025-07-23'),
            'category' => 'Maintenance',
            'slug' => 'maintenance-server-terjadwal',
            'priority' => 'urgent',
        ],
        (object) [
            'title' => 'Pembukaan Pendaftaran Program Magang Teknologi',
            'excerpt' =>
                'Kesempatan magang untuk mahasiswa jurusan IT dengan durasi 3-6 bulan. Dapatkan pengalaman kerja di lingkungan teknologi terdepan dengan mentor berpengalaman.',
            'date' => \Carbon\Carbon::parse('2025-07-22'),
            'category' => 'Rekrutmen',
            'slug' => 'pendaftaran-program-magang',
            'priority' => 'normal',
        ],
        (object) [
            'title' => 'Update Kebijakan Keamanan Data Terbaru',
            'excerpt' =>
                'Pembaruan kebijakan keamanan data untuk compliance dengan standar internasional. Semua pengguna diminta untuk memperbarui password dan mengaktifkan 2FA.',
            'date' => \Carbon\Carbon::parse('2025-07-21'),
            'category' => 'Kebijakan',
            'slug' => 'update-kebijakan-keamanan',
            'priority' => 'urgent',
        ],
        (object) [
            'title' => 'Maintenance Server Terjadwal - 25 Juli 2025',
            'excerpt' =>
                'Akan dilakukan maintenance server untuk upgrade sistem pada Kamis, 25 Juli 2025 pukul 01:00 - 05:00 WIB. Mohon maklum atas ketidaknyamanan yang terjadi.',
            'date' => \Carbon\Carbon::parse('2025-07-23'),
            'category' => 'Maintenance',
            'slug' => 'maintenance-server-terjadwal',
            'priority' => 'urgent',
        ],
        (object) [
            'title' => 'Pembukaan Pendaftaran Program Magang Teknologi',
            'excerpt' =>
                'Kesempatan magang untuk mahasiswa jurusan IT dengan durasi 3-6 bulan. Dapatkan pengalaman kerja di lingkungan teknologi terdepan dengan mentor berpengalaman.',
            'date' => \Carbon\Carbon::parse('2025-07-22'),
            'category' => 'Rekrutmen',
            'slug' => 'pendaftaran-program-magang',
            'priority' => 'normal',
        ],
        (object) [
            'title' => 'Update Kebijakan Keamanan Data Terbaru',
            'excerpt' =>
                'Pembaruan kebijakan keamanan data untuk compliance dengan standar internasional. Semua pengguna diminta untuk memperbarui password dan mengaktifkan 2FA.',
            'date' => \Carbon\Carbon::parse('2025-07-21'),
            'category' => 'Kebijakan',
            'slug' => 'update-kebijakan-keamanan',
            'priority' => 'urgent',
        ],
        (object) [
            'title' => 'Maintenance Server Terjadwal - 25 Juli 2025',
            'excerpt' =>
                'Akan dilakukan maintenance server untuk upgrade sistem pada Kamis, 25 Juli 2025 pukul 01:00 - 05:00 WIB. Mohon maklum atas ketidaknyamanan yang terjadi.',
            'date' => \Carbon\Carbon::parse('2025-07-23'),
            'category' => 'Maintenance',
            'slug' => 'maintenance-server-terjadwal',
            'priority' => 'urgent',
        ],
        (object) [
            'title' => 'Pembukaan Pendaftaran Program Magang Teknologi',
            'excerpt' =>
                'Kesempatan magang untuk mahasiswa jurusan IT dengan durasi 3-6 bulan. Dapatkan pengalaman kerja di lingkungan teknologi terdepan dengan mentor berpengalaman.',
            'date' => \Carbon\Carbon::parse('2025-07-22'),
            'category' => 'Rekrutmen',
            'slug' => 'pendaftaran-program-magang',
            'priority' => 'normal',
        ],
        (object) [
            'title' => 'Update Kebijakan Keamanan Data Terbaru',
            'excerpt' =>
                'Pembaruan kebijakan keamanan data untuk compliance dengan standar internasional. Semua pengguna diminta untuk memperbarui password dan mengaktifkan 2FA.',
            'date' => \Carbon\Carbon::parse('2025-07-21'),
            'category' => 'Kebijakan',
            'slug' => 'update-kebijakan-keamanan',
            'priority' => 'urgent',
        ],
        // Tambahkan pengumuman lainnya sesuai kebutuhan ...
    ]);

    // Buat dummy paginasi sederhana menggunakan LengthAwarePaginator
    use Illuminate\Pagination\LengthAwarePaginator;
    use Illuminate\Support\Collection;
    use Illuminate\Pagination\Paginator;

    $perPage = 12;
    $currentPage = Paginator::resolveCurrentPage() ?: 1;
    $currentPageItems = $announcements->slice(($currentPage - 1) * $perPage, $perPage)->values();
    $paginatedAnnouncements = new LengthAwarePaginator(
        $currentPageItems,
        $announcements->count(),
        $perPage,
        $currentPage,
        ['path' => Paginator::resolveCurrentPath()],
    );
@endphp

<x-public.layouts title="{{ $title }}" description="{{ $description }}" keywords="{{ $keywords }}">
    <x-slot:title>{{ $title }}</x-slot:title>
    <style>
        .underline-animate::after {
            content: '';
            position: absolute;
            bottom: -1rem;
            left: 0;
            height: 4px;
            width: 0;
            background-color: #062749;
            transition: width 0.4s ease;
        }

        .group:hover .underline-animate::after {
            width: 100%;
        }

        /* Supaya card tidak terlalu tinggi dan proporsional */
        .announcement-grid>* {
            /* Contoh kontrol tinggi card, sesuaikan jika perlu */
            min-height: 250px;
            display: flex;
            flex-direction: column;
        }
    </style>
    <section class="py-20 bg-primary">
        <!-- Pengumuman Section -->
        <div class="container mx-auto px-10 sm:px-20 m-4">
            <!-- Header Section -->
            <div class="text-center mb-10 group">
                <h2 class="text-3xl md:text-4xl font-bold text-secondary mb-4 relative inline-block underline-animate">
                    Pengumuman
                </h2>
                <h3 class="text-lg text-secondary max-w-2xl mx-auto pt-2">
                    Pengumuman terbaru seputar PUSTIPD
                </h3>
            </div>

            <!-- Pengumuman Cards Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 announcement-grid">
                @foreach ($paginatedAnnouncements as $announcement)
                    <x-announcement-card title="{{ $announcement->title }}" excerpt="{{ $announcement->excerpt }}"
                        date="{{ $announcement->date->format('d F Y') }}" category="{{ $announcement->category }}"
                        link="/pengumuman/{{ $announcement->slug }}" priority="{{ $announcement->priority }}" />
                @endforeach
            </div>

            <!-- Pagination -->
            @if ($paginatedAnnouncements->lastPage() > 1)
                <div class="flex justify-center items-center gap-2 mt-7 select-none">
                    <!-- Tombol Previous -->
                    <a href="{{ $paginatedAnnouncements->previousPageUrl() ?? '#' }}"
                        class="flex items-center justify-center w-9 h-9 rounded 
                    {{ $paginatedAnnouncements->onFirstPage() ? 'bg-gray-300 text-gray-500 cursor-not-allowed' : 'bg-white text-custom-blue hover:bg-custom-blue hover:text-white' }}
                    transition focus:outline-none"
                        aria-label="Sebelumnya" {!! $paginatedAnnouncements->onFirstPage() ? 'tabindex="-1" aria-disabled="true"' : '' !!}>
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 20 20">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M13 15l-5-5 5-5" />
                        </svg>
                    </a>

                    <!-- Loop untuk angka halaman -->
                    @foreach (range(1, $paginatedAnnouncements->lastPage()) as $page)
                        @if ($page == $paginatedAnnouncements->currentPage())
                            <span
                                class="flex items-center justify-center w-9 h-9 rounded bg-custom-blue text-white font-semibold shadow transition focus:outline-none"
                                aria-current="page">{{ $page }}</span>
                        @elseif ($page >= $paginatedAnnouncements->currentPage() - 2 && $page <= $paginatedAnnouncements->currentPage() + 2)
                            <a href="{{ $paginatedAnnouncements->url($page) }}"
                                class="flex items-center justify-center w-9 h-9 rounded bg-white text-custom-blue hover:bg-custom-blue hover:text-white transition focus:outline-none">
                                {{ $page }}
                            </a>
                        @endif
                    @endforeach

                    <!-- Tombol Next -->
                    <a href="{{ $paginatedAnnouncements->nextPageUrl() ?? '#' }}"
                        class="flex items-center justify-center w-9 h-9 rounded 
                    {{ $paginatedAnnouncements->hasMorePages() ? 'bg-white text-custom-blue hover:bg-custom-blue hover:text-white' : 'bg-gray-300 text-gray-500 cursor-not-allowed' }}
                    transition focus:outline-none"
                        aria-label="Selanjutnya" {!! !$paginatedAnnouncements->hasMorePages() ? 'tabindex="-1" aria-disabled="true"' : '' !!}>
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 20 20">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M7 5l5 5-5 5" />
                        </svg>
                    </a>
                </div>
            @endif
        </div>
    </section>

</x-public.layouts>
